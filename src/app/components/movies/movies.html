<section id="movies">
  <div class="container mt-4">
    <h2 class="mb-4 fw-bold">Now Playing</h2>
    <div class="row g-4 d-flex">
      @for (movie of movies(); track movie.id) {
  <div class="col-sm-6 col-md-4 col-lg-2">
    <div class="card h-100 shadow-sm border-0 rounded-4 position-relative overflow-hidden">
      <div class="position-relative">
        <img
          class="card-img-top rounded-top-4"
          [src]="'https://image.tmdb.org/t/p/w500' + movie.poster_path"
          [alt]="movie.title"
        />

<div class="vote-circle position-absolute start-1" style="bottom: -1rem; left: 0.5rem;">
          <svg viewBox="0 0 36 36" class="circular-chart">
            <path
              class="circle-bg"
              d="M18 2.0845
                 a 15.9155 15.9155 0 0 1 0 31.831
                 a 15.9155 15.9155 0 0 1 0 -31.831"
            />
            <path
  class="circle"
  [attr.stroke-dasharray]="(movie.vote_average * 10) + ', 100'"
  [attr.stroke]="
    movie.vote_average >= 7.5
      ? '#21d07a'
      : movie.vote_average >= 5
        ? '#d2d531'
        : '#db2360'
  "
  d="M18 2.0845
     a 15.9155 15.9155 0 0 1 0 31.831
     a 15.9155 15.9155 0 0 1 0 -31.831"
/>

            <text x="18" y="20.35" class="percentage">{{ movie.vote_average * 10 | number:'1.0-0' }}</text>
          </svg>
        </div>

        <!-- Wishlist icon (heart) -->
        <div class="position-absolute bottom-0 end-0 m-2">
          <i class="bi bi-heart-fill text-warning fs-5"></i>
        </div>
      </div>

      <div class="card-body text-center">
        <h5 class="card-title mb-1">{{ movie.title }}</h5>
        <p class="text-muted small">{{ movie.release_date | date }}</p>
      </div>
    </div>
  </div>
}

    </div>
  </div>
</section>
